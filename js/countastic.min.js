(function(){var e=function(e){this._init(e)};e.prototype={_settings:{countable:null,counter:"#counter",button:"#counter-btn",maxCount:140,warningCount:20,strictMax:false,countDirection:"down",successClass:"success",warningClass:"warning",alertClass:"alert",onWarning:function(){},onSuccess:function(){},onMaxCount:function(){}},_init:function(e){this._settings=this.merge(this._settings,e);var t=document.querySelector(this._settings.countable);if(!t){throw new Error("missing parameters: countable input field")}var n=document.querySelector(this._settings.counter);if(!n){throw new Error("missing parameters: counter")}this.attachEventHandlers(n,t)},merge:function(e,t){var n={},r;for(r in e){n[r]=e[r]}for(r in t){n[r]=t[r]}return n},attachEventHandlers:function(e,t){t.addEventListener("keyup",function(){this.refreshCounter(e,t)}.bind(this,false));t.addEventListener("keydown",function(){this.refreshCounter(e,t)}.bind(this,false));t.addEventListener("keypress",function(){setTimeout(this.refreshCounter(e,t),5)}.bind(this,false));t.addEventListener("remove",function(){this.refreshCounter(e,t)}.bind(this,false));t.addEventListener("change",function(){this.refreshCounter(e,t)}.bind(this,false));t.addEventListener("focus",function(){this.refreshCounter(e,t)}.bind(this,false));t.addEventListener("select",function(){this.refreshCounter(e,t)}.bind(this,false))},refreshCounter:function(e,t){var n,r,i,s,o;i=this._settings.maxCount;s=this._settings.strictMax;o=document.querySelector(this._settings.button);n=i-t.value.length;r=this.reverseCount(n);if(s&&n<=0){if(n<0){this._settings.onMaxCount(this.countInt(r,n),this,e)}}e.innerHTML=this.numberFormat(this.countInt(r,n));this.setCssAndCallbacks(n,this._settings)},reverseCount:function(e){return e-e*2+this._settings.maxCount},countInt:function(e,t){return this._settings.countDirection==="up"?e:t},numberFormat:function(e){e+="";splitted=e.split(".");x=splitted[0];y=splitted.length>1?"."+splitted[1]:"";var t=/(\d+)(\d{3})/;while(t.test(x)){x=x.replace(t,"$1"+","+"$2")}return x+y},enableButton:function(e){if(!e){return false}else{e.disabled=false}},disableButton:function(e){if(!e){return false}else{e.disabled=true}},setCssAndCallbacks:function(e,t){var n=document.querySelector(t.counter);var r=document.querySelector(t.button);var i=this.reverseCount(e);if(e==t.maxCount){n.classList.remove(t.alertClass);n.classList.add(t.successClass)}if(!n.classList.contains(t.successClass)&&!n.classList.contains(t.alertClass)&&!n.classList.contains(t.warningClass)){if(e>t.warningCount&&e>0){n.classList.add(t.successClass)}else if(e>0&&e<=t.warningCount){n.classList.add(t.warningClass)}else if(e<=0){n.classList.add(t.alertClass)}}else if(e>0&&e<=t.warningCount){if(n.classList.contains(t.successClass)){n.classList.remove(t.successClass);n.classList.add(t.warningClass)}else if(n.classList.contains(t.alertClass)){n.classList.remove(t.alertClass);n.classList.add(t.warningClass)}t.onWarning(this.countInt(i,e),this,n);this.enableButton(r)}else if(e<=0&&n.classList.contains(t.warningClass)){n.classList.remove(t.warningClass);n.classList.add(t.alertClass);t.onMaxCount(this.countInt(i,e),this,n);this.disableButton(r)}else if(e>t.warningCount&&n.classList.contains(t.warningClass)){n.classList.remove(t.warningClass);n.classList.add(t.successClass);t.onSuccess(this.countInt(i,e),this,n);this.enableButton(r)}}};this.Countastic=e})()